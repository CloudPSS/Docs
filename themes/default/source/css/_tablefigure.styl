@import "_settings"

caption-style($counter, $prefix = "", $sep = "." , $suffix = " ")
  counter-increment: $counter 
  &::before
    content: $prefix counter(h2) $sep counter($counter) $suffix

body
  counter-reset: article h2 h3 h4 h5 h6 figure
    
article
  counter-increment: article
  counter-reset: h2 h3 h4 h5 h6 figure table
  h2
    counter-reset: h3 h4 h5 h6 figure table
  h3
    counter-reset: h4 h5 h6
  h4
    counter-reset: h5 h6
  h5
    counter-reset: h6
  h6
    counter-reset: ;
  for i in 2..6
    h{i}
      counter-increment: s("h%s", i)
      
  figure:not(.highlight), table
    @media print
      page-break-inside: avoid
    
    
  figure:not(.highlight) > figcaption, table > caption
    margin: 0.5em auto
    color: darken($theme, 30)
    text-align: center
    font-size: 0.8em;
    font-weight: bold

  figure:not(.highlight)
    display: block
    margin: 1em 0
    > figcaption
      margin: 0.2em 0 -1.2em
      padding-bottom: 0.6em
      caption-style(figure, '图 ')

  table:not(.highlight)
    border-spacing: 0
    border-collapse: collapse
    margin: 1.2em auto
    padding: 0
    text-align: left
    > caption
      margin-top: -1.2em
      padding-top: 0.6em
      caption-style(table, '表 ')
    code
      background-color: darken($codebg, 5)
    td, th
      min-width: 80px
      line-height: 1.5em
      padding: .4em .8em
      border: 1px solid $border
    > tbody:not(:last-child) > tr:last-of-type > td
      border-bottom-width: 2px
    > thead > tr:last-of-type > th
      border-bottom-width: 2px
      @media screen
        position: sticky
        z-index: 100
        top: -.2em
        font-weight: bold
        border-color: darken($border, 10)
    @media screen
      > thead > tr > th
        border-color: darken($border, 10)
        background-color: $border
      > thead > tr:nth-last-child(2n) > th
        background-color: lighten($border, 5)
      > tbody > tr:nth-child(2n) > td
        background-color: lighten($border, 5)

  img, svg
    border: none
  mx-graph
    &:empty
      height: 150px
    display: block
    text-align: center
    overflow-x: auto
    padding: 12px
    > svg
      margin: auto
      overflow: visible
      
  p mx-graph
    display: inline-block
        