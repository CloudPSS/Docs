<!-- BEGIN footer -->
<%_
  const min = !page.full_footer;
  var email = config.contact;
  if (page.author_email)
    email = page.author_email;
  var cb = typeof config.copyright_begin !== 'object'
    ? (config.copyright_begin || '').toString()
    : config.copyright_begin.getFullYear();
  var fullcopy = `Copyright Â© ${cb}-${new Date().getFullYear()} by ${config.title || ''}`;
  function btoa(str)
  {
    return (new Buffer(str)).toString('base64');
  }
-%>

<footer class="<%- min ? 'min' : ''%>">
  <%_ if(min) { -%>
    <p class="contact">
      <%_ if(page.author) { -%>
        <a rel="author" data="<%- btoa(btoa(btoa(email))) %>" title="<%- __('contact-author') %>">
          <img src="<%- gravatar(page.author_email ? email : page.author, {d:'identicon', s: '64'}) %>">
          <%= page.author %>
        </a>
      <%_ } -%>
      <span title="<%- full_date(page.date) %>"><%- __('created-at', `<time datetime="${date_xml(page.date)}" pubdate="pubdate">${date(page.date)}</time>`) %></span>
      <%_ if(date(page.date) !== date(page.updated)) { -%>
        <span title="<%- full_date(page.updated) %>"><%- __('updated-at', `<time datetime="${date_xml(page.updated)}">${date(page.updated)}</time>`) %></span>
      <%_ } -%>
    </p>
    <p class="copyright" title='<%= fullcopy %>
<%= config.ICP %>'>Â© <%- new Date().getFullYear() %> <%= config.title %></p>
  <%_ } else { -%>
    <p><%= fullcopy %></p>
    <p><%- link_to('http://www.miitbeian.gov.cn', config.ICP, {external: true}) %></p>
    <p><%- link_to('http://www.eiri.tsinghua.edu.cn', __('eiri'), {external: true}) %></p> 
  <%_ } -%>
  <%- js('/js/footer') -%>
</footer>
<!-- END footer -->