<!-- BEGIN footer -->
<%_
  var email = config.contact;
  if(page.author_email)
    email = page.author_email;
  var cb = typeof config.copyright_begin !== 'object'
    ? (config.copyright_begin || '').toString()
    : config.copyright_begin.getFullYear();
  var fullcopy = `Copyright © ${cb}-${new Date().getFullYear()} by ${config.title || ''}`;
  function btoa(str)
  {
    return (new Buffer(str)).toString('base64');
  }
-%>

<footer class="page-footer <%- min ? 'min' : ''%>">
  <%_ if(min) { -%>
    <p class="contact">
      <%_ if(page.author) { -%>
        <span>
          <a class="author" data="<%- btoa(btoa(btoa(email))) %>" title="联系作者">
            <style>footer.page-footer a.author::before{background-image: url(<%- gravatar(email,{d:'identicon', s: '256'}) %>)}</style>
            <%= page.author %>
          </a>
        </span>
      <%_ } -%>
      <span title="<%- full_date(page.date) %>">创建于 <time datetime="<%- date_xml(page.date) %>" pubdate="pubdate"><%- date(page.date) %></time></span>
      <%_ if(date(page.date) !== date(page.updated)) { -%>
        <span title="<%- full_date(page.updated) %>">最后更新于 <time datetime="<%- date_xml(page.updated) %>"><%- date(page.updated) %></time></span>
      <%_ } -%>
    </p>
    <p class="copyright" title='<%= fullcopy %>
<%= config.ICP %>'>© <%- new Date().getFullYear() %> <%= config.title %></p>
  <%_ } else { -%>
    <p><%= fullcopy %></p>
    <p><%- link_to('http://www.miitbeian.gov.cn', config.ICP, {external: true}) %></p>
    <p><%- link_to('http://www.eiri.tsinghua.edu.cn', '清华大学能源互联网创新研究院', {external: true}) %></p> 
  <%_ } -%>
  <%- js('/js/footer') -%>
</footer>
<!-- END footer -->